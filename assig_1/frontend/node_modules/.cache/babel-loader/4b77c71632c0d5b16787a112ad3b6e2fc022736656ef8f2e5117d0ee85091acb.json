{"ast":null,"code":"import React,{useState}from'react';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL='/api/chat';function App(){const[apiKey,setApiKey]=useState('');const[inputKey,setInputKey]=useState('');const[userMessage,setUserMessage]=useState('');const[response,setResponse]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');// Ask for API key first\nif(!apiKey){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Enter your OpenAI API Key\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:inputKey,onChange:e=>setInputKey(e.target.value),placeholder:\"sk-...\",style:{width:300,padding:8}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setApiKey(inputKey),disabled:!inputKey,children:\"Continue\"})]});}const handleSend=async e=>{e.preventDefault();setLoading(true);setError('');setResponse('');try{const response=await fetch(\"http://localhost:8000/api/chat\",{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({developer_message:'You are a helpful AI assistant.',user_message:userMessage,model:'gpt-4.1-mini',api_key:apiKey})});// if (!res.ok) {\n//   const err = await res.json();\n//   throw new Error(err.detail || 'API error');\n// }\n// const data = await res.json();\nif(!response.body){throw new Error('Response body is null');}const reader=response.body.getReader();const decoder=new TextDecoder(\"utf-8\");let accumulatedResponse='';// Initialize a variable to hold the full response\nwhile(true){const{done,value}=await reader.read();if(done)break;const chunk=decoder.decode(value);accumulatedResponse+=chunk;// Append chunk to the accumulated response\nconsole.log(chunk);// You might want to append to UI here as well for streaming effect\n}setResponse(accumulatedResponse);// Set the state with the full response\n}catch(err){setError(err.message||'Unknown error');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"AI Chat\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSend,children:[/*#__PURE__*/_jsx(\"textarea\",{value:userMessage,onChange:e=>setUserMessage(e.target.value),placeholder:\"Type your message...\",rows:4,style:{width:400,padding:8}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading||!userMessage,children:loading?'Sending...':'Send'})]}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',marginTop:16},children:error}),response&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:16,background:'#f5f5f5',padding:16,borderRadius:8},children:response}),/*#__PURE__*/_jsx(\"div\",{style:{marginTop:32},children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setApiKey(''),children:\"Change API Key\"})})]});}export default App;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","API_URL","App","apiKey","setApiKey","inputKey","setInputKey","userMessage","setUserMessage","response","setResponse","loading","setLoading","error","setError","className","children","type","value","onChange","e","target","placeholder","style","width","padding","onClick","disabled","handleSend","preventDefault","fetch","method","headers","body","JSON","stringify","developer_message","user_message","model","api_key","Error","reader","getReader","decoder","TextDecoder","accumulatedResponse","done","read","chunk","decode","console","log","err","message","onSubmit","rows","color","marginTop","background","borderRadius"],"sources":["/Users/vipinvijayan/Developer/projects/AI/AIMakerSpace/code/The-AI-Engineer-Challenge/frontend/src/App.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport './App.css';\n\nconst API_URL = '/api/chat';\n\nfunction App() {\n  const [apiKey, setApiKey] = useState('');\n  const [inputKey, setInputKey] = useState('');\n  const [userMessage, setUserMessage] = useState('');\n  const [response, setResponse] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Ask for API key first\n  if (!apiKey) {\n    return (\n      <div className=\"App\">\n        <h2>Enter your OpenAI API Key</h2>\n        <input\n          type=\"password\"\n          value={inputKey}\n          onChange={e => setInputKey(e.target.value)}\n          placeholder=\"sk-...\"\n          style={{ width: 300, padding: 8 }}\n        />\n        <br /><br />\n        <button\n          onClick={() => setApiKey(inputKey)}\n          disabled={!inputKey}\n        >\n          Continue\n        </button>\n      </div>\n    );\n  }\n\n  const handleSend = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n    setResponse('');\n    try {\n      const response = await fetch(\"http://localhost:8000/api/chat\", {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          developer_message: 'You are a helpful AI assistant.',\n          user_message: userMessage,\n          model: 'gpt-4.1-mini',\n          api_key: apiKey,\n        })\n      });\n      // if (!res.ok) {\n      //   const err = await res.json();\n      //   throw new Error(err.detail || 'API error');\n      // }\n      // const data = await res.json();\n      if (!response.body) {\n        throw new Error('Response body is null');\n      }\n      const reader = response.body.getReader();\n      const decoder = new TextDecoder(\"utf-8\");\n\n      let accumulatedResponse = ''; // Initialize a variable to hold the full response\n\n      while (true) {\n        const { done, value } = await reader.read();\n        if (done) break;\n        const chunk = decoder.decode(value);\n        accumulatedResponse += chunk; // Append chunk to the accumulated response\n        console.log(chunk); // You might want to append to UI here as well for streaming effect\n      }\n\n      setResponse(accumulatedResponse); // Set the state with the full response\n    } catch (err: any) {\n      setError(err.message || 'Unknown error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <h2>AI Chat</h2>\n      <form onSubmit={handleSend}>\n        <textarea\n          value={userMessage}\n          onChange={e => setUserMessage(e.target.value)}\n          placeholder=\"Type your message...\"\n          rows={4}\n          style={{ width: 400, padding: 8 }}\n        />\n        <br />\n        <button type=\"submit\" disabled={loading || !userMessage}>\n          {loading ? 'Sending...' : 'Send'}\n        </button>\n      </form>\n      {error && <div style={{ color: 'red', marginTop: 16 }}>{error}</div>}\n      {response && <div style={{ marginTop: 16, background: '#f5f5f5', padding: 16, borderRadius: 8 }}>{response}</div>}\n      <div style={{ marginTop: 32 }}>\n        <button onClick={() => setApiKey('')}>Change API Key</button>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}